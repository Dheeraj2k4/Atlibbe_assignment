{"ast":null,"code":"import React,{useState,useEffect}from'react';import authService from'../../services/authService';/**\n * Admin Users Page\n * Page for administrators to manage users\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminUsersPage=()=>{const[users,setUsers]=useState([]);const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(null);const[isDeleting,setIsDeleting]=useState({});// Load users\nuseEffect(()=>{const loadUsers=async()=>{setIsLoading(true);setError(null);try{const usersData=await authService.getUsers();setUsers(usersData);}catch(err){setError(err.message||'Failed to load users');console.error('Error loading users:',err);}finally{setIsLoading(false);}};loadUsers();},[]);/**\n   * Handle user deletion\n   * @param userId User ID to delete\n   */const handleDeleteUser=async userId=>{if(window.confirm('Are you sure you want to delete this user?')){setIsDeleting(prev=>({...prev,[userId]:true}));try{await authService.deleteUser(userId);// Remove user from state\nsetUsers(prevUsers=>prevUsers.filter(user=>user._id!==userId));}catch(err){setError(err.message||'Failed to delete user');console.error('Error deleting user:',err);}finally{setIsDeleting(prev=>({...prev,[userId]:false}));}}};if(isLoading&&users.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading users...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"page-container admin-users-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Manage Users\"}),/*#__PURE__*/_jsx(\"p\",{children:\"View and manage user accounts\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"page-content\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"users-list\",children:[/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.role}),/*#__PURE__*/_jsx(\"td\",{className:\"actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:()=>handleDeleteUser(user._id),disabled:isDeleting[user._id],children:isDeleting[user._id]?'Deleting...':'Delete'})})]},user._id))})]}),users.length===0&&!isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"no-users\",children:\"No users found\"})]})]})]});};export default AdminUsersPage;","map":{"version":3,"names":["React","useState","useEffect","authService","jsx","_jsx","jsxs","_jsxs","AdminUsersPage","users","setUsers","isLoading","setIsLoading","error","setError","isDeleting","setIsDeleting","loadUsers","usersData","getUsers","err","message","console","handleDeleteUser","userId","window","confirm","prev","deleteUser","prevUsers","filter","user","_id","length","className","children","map","name","email","role","onClick","disabled"],"sources":["C:/Users/Dheeraj/Desktop/Altibbe_assignemnt/frontend/src/pages/admin/AdminUsersPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport authService, { UserData } from '../../services/authService';\n\n/**\n * Admin Users Page\n * Page for administrators to manage users\n */\nconst AdminUsersPage: React.FC = () => {\n  const [users, setUsers] = useState<UserData[]>([]);\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isDeleting, setIsDeleting] = useState<Record<string, boolean>>({});\n\n  // Load users\n  useEffect(() => {\n    const loadUsers = async () => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const usersData = await authService.getUsers();\n        setUsers(usersData);\n      } catch (err: any) {\n        setError(err.message || 'Failed to load users');\n        console.error('Error loading users:', err);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadUsers();\n  }, []);\n\n  /**\n   * Handle user deletion\n   * @param userId User ID to delete\n   */\n  const handleDeleteUser = async (userId: string) => {\n    if (window.confirm('Are you sure you want to delete this user?')) {\n      setIsDeleting((prev) => ({ ...prev, [userId]: true }));\n      try {\n        await authService.deleteUser(userId);\n        // Remove user from state\n        setUsers((prevUsers) => prevUsers.filter((user) => user._id !== userId));\n      } catch (err: any) {\n        setError(err.message || 'Failed to delete user');\n        console.error('Error deleting user:', err);\n      } finally {\n        setIsDeleting((prev) => ({ ...prev, [userId]: false }));\n      }\n    }\n  };\n\n  if (isLoading && users.length === 0) {\n    return <div className=\"loading\">Loading users...</div>;\n  }\n\n  return (\n    <div className=\"page-container admin-users-page\">\n      <div className=\"page-header\">\n        <h1>Manage Users</h1>\n        <p>View and manage user accounts</p>\n      </div>\n\n      <div className=\"page-content\">\n        {error && <div className=\"error-message\">{error}</div>}\n\n        <div className=\"users-list\">\n          <table>\n            <thead>\n              <tr>\n                <th>Name</th>\n                <th>Email</th>\n                <th>Role</th>\n                <th>Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {users.map((user) => (\n                <tr key={user._id}>\n                  <td>{user.name}</td>\n                  <td>{user.email}</td>\n                  <td>{user.role}</td>\n                  <td className=\"actions\">\n                    <button\n                      className=\"delete-button\"\n                      onClick={() => handleDeleteUser(user._id)}\n                      disabled={isDeleting[user._id]}\n                    >\n                      {isDeleting[user._id] ? 'Deleting...' : 'Delete'}\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n\n          {users.length === 0 && !isLoading && (\n            <div className=\"no-users\">No users found</div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminUsersPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}