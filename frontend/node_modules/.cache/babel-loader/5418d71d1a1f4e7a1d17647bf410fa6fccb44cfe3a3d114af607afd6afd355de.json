{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams,useNavigate,Link}from'react-router-dom';import{useReports}from'../../contexts/ReportContext';import reportService from'../../services/reportService';/**\n * Report Detail Component\n * Displays detailed information about a specific report\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ReportDetail=()=>{const{id}=useParams();const[report,setReport]=useState(null);const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(null);const[isDeleting,setIsDeleting]=useState(false);const{deleteReport}=useReports();const navigate=useNavigate();// Load report data\nuseEffect(()=>{const loadReport=async()=>{if(!id)return;setIsLoading(true);setError(null);try{const reportData=await reportService.getReportById(id);setReport(reportData);}catch(err){setError(err.message||'Failed to load report');console.error('Error loading report:',err);}finally{setIsLoading(false);}};loadReport();},[id]);/**\n   * Handle report deletion\n   */const handleDelete=async()=>{if(!id||!report)return;if(window.confirm('Are you sure you want to delete this report?')){setIsDeleting(true);try{await deleteReport(id);navigate('/reports');}catch(err){setError(err.message||'Failed to delete report');console.error('Error deleting report:',err);}finally{setIsDeleting(false);}}};/**\n   * Format date for display\n   * @param date Date to format\n   */const formatDate=date=>{return new Date(date).toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric',hour:'2-digit',minute:'2-digit'});};/**\n   * Get report type display name\n   * @param type Report type\n   */const getReportTypeDisplay=type=>{const types={standard:'Standard',detailed:'Detailed',summary:'Summary',custom:'Custom'};return types[type]||type.charAt(0).toUpperCase()+type.slice(1);};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading report...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"error-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(Link,{to:\"/reports\",className:\"button\",children:\"Back to Reports\"})]});}if(!report){return/*#__PURE__*/_jsxs(\"div\",{className:\"not-found-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"not-found-message\",children:\"Report not found\"}),/*#__PURE__*/_jsx(Link,{to:\"/reports\",className:\"button\",children:\"Back to Reports\"})]});}return/*#__PURE__*/_jsx(\"div\",{className:\"report-detail-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"report-detail-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Report Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Report Type:\"}),/*#__PURE__*/_jsx(\"span\",{children:getReportTypeDisplay(report.report_type)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Created:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatDate(report.created_at)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Filename:\"}),/*#__PURE__*/_jsx(\"span\",{children:report.filename})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Product ID:\"}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(Link,{to:`/products/${report.product._id}`,children:report.product.name})})]}),report.metadata&&/*#__PURE__*/_jsxs(\"div\",{className:\"metadata-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Report Metadata\"}),/*#__PURE__*/_jsx(\"div\",{className:\"metadata-content\",children:Object.entries(report.metadata).map(_ref=>{let[key,value]=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"metadata-item\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[key.charAt(0).toUpperCase()+key.slice(1).replace(/([A-Z])/g,' $1'),\":\"]}),/*#__PURE__*/_jsx(\"span\",{children:typeof value==='boolean'?value?'Yes':'No':typeof value==='object'?JSON.stringify(value):String(value)})]},key);})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-actions\",children:[/*#__PURE__*/_jsx(\"a\",{href:reportService.getReportDownloadUrl(report.filename),className:\"download-button\",target:\"_blank\",rel:\"noopener noreferrer\",children:\"Download Report\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:handleDelete,disabled:isDeleting,children:isDeleting?'Deleting...':'Delete Report'}),/*#__PURE__*/_jsx(Link,{to:\"/reports\",className:\"back-button\",children:\"Back to Reports\"})]})]})});};export default ReportDetail;","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","Link","useReports","reportService","jsx","_jsx","jsxs","_jsxs","ReportDetail","id","report","setReport","isLoading","setIsLoading","error","setError","isDeleting","setIsDeleting","deleteReport","navigate","loadReport","reportData","getReportById","err","message","console","handleDelete","window","confirm","formatDate","date","Date","toLocaleDateString","year","month","day","hour","minute","getReportTypeDisplay","type","types","standard","detailed","summary","custom","charAt","toUpperCase","slice","className","children","to","report_type","created_at","filename","product","_id","name","metadata","Object","entries","map","_ref","key","value","replace","JSON","stringify","String","href","getReportDownloadUrl","target","rel","onClick","disabled"],"sources":["C:/Users/Dheeraj/Desktop/Altibbe_assignemnt/frontend/src/components/reports/ReportDetail.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport { useReports } from '../../contexts/ReportContext';\nimport reportService, { Report } from '../../services/reportService';\n\n/**\n * Report Detail Component\n * Displays detailed information about a specific report\n */\nconst ReportDetail: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const [report, setReport] = useState<Report | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const { deleteReport } = useReports();\n  const navigate = useNavigate();\n\n  // Load report data\n  useEffect(() => {\n    const loadReport = async () => {\n      if (!id) return;\n\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const reportData = await reportService.getReportById(id);\n        setReport(reportData);\n      } catch (err: any) {\n        setError(err.message || 'Failed to load report');\n        console.error('Error loading report:', err);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadReport();\n  }, [id]);\n\n  /**\n   * Handle report deletion\n   */\n  const handleDelete = async () => {\n    if (!id || !report) return;\n\n    if (window.confirm('Are you sure you want to delete this report?')) {\n      setIsDeleting(true);\n      try {\n        await deleteReport(id);\n        navigate('/reports');\n      } catch (err: any) {\n        setError(err.message || 'Failed to delete report');\n        console.error('Error deleting report:', err);\n      } finally {\n        setIsDeleting(false);\n      }\n    }\n  };\n\n  /**\n   * Format date for display\n   * @param date Date to format\n   */\n  const formatDate = (date: Date | string) => {\n    return new Date(date).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  };\n\n  /**\n   * Get report type display name\n   * @param type Report type\n   */\n  const getReportTypeDisplay = (type: string) => {\n    const types: Record<string, string> = {\n      standard: 'Standard',\n      detailed: 'Detailed',\n      summary: 'Summary',\n      custom: 'Custom',\n    };\n    return types[type] || type.charAt(0).toUpperCase() + type.slice(1);\n  };\n\n  if (isLoading) {\n    return <div className=\"loading\">Loading report...</div>;\n  }\n\n  if (error) {\n    return (\n      <div className=\"error-container\">\n        <div className=\"error-message\">{error}</div>\n        <Link to=\"/reports\" className=\"button\">Back to Reports</Link>\n      </div>\n    );\n  }\n\n  if (!report) {\n    return (\n      <div className=\"not-found-container\">\n        <div className=\"not-found-message\">Report not found</div>\n        <Link to=\"/reports\" className=\"button\">Back to Reports</Link>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"report-detail-container\">\n      <div className=\"report-detail-card\">\n        <h2>Report Details</h2>\n        \n        <div className=\"report-info\">\n          <div className=\"info-group\">\n            <label>Report Type:</label>\n            <span>{getReportTypeDisplay(report.report_type)}</span>\n          </div>\n          \n          <div className=\"info-group\">\n            <label>Created:</label>\n            <span>{formatDate(report.created_at)}</span>\n          </div>\n          \n          <div className=\"info-group\">\n            <label>Filename:</label>\n            <span>{report.filename}</span>\n          </div>\n          \n          <div className=\"info-group\">\n            <label>Product ID:</label>\n            <span>\n              <Link to={`/products/${report.product._id}`}>{report.product.name}</Link>\n            </span>\n          </div>\n          \n          {report.metadata && (\n            <div className=\"metadata-section\">\n              <h3>Report Metadata</h3>\n              <div className=\"metadata-content\">\n                {Object.entries(report.metadata).map(([key, value]) => (\n                  <div key={key} className=\"metadata-item\">\n                    <label>{key.charAt(0).toUpperCase() + key.slice(1).replace(/([A-Z])/g, ' $1')}:</label>\n                    <span>\n                      {typeof value === 'boolean'\n                        ? value\n                          ? 'Yes'\n                          : 'No'\n                        : typeof value === 'object'\n                        ? JSON.stringify(value)\n                        : String(value)}\n                    </span>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n        \n        <div className=\"report-actions\">\n          <a \n            href={reportService.getReportDownloadUrl(report.filename)} \n            className=\"download-button\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Download Report\n          </a>\n          \n          <button\n            className=\"delete-button\"\n            onClick={handleDelete}\n            disabled={isDeleting}\n          >\n            {isDeleting ? 'Deleting...' : 'Delete Report'}\n          </button>\n          \n          <Link to=\"/reports\" className=\"back-button\">\n            Back to Reports\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ReportDetail;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}